#!/bin/bash

# Stop the script on error.
set -e





################################################################################
# Parameters
################################################################################

SOURCE=$1   # Name of the source program.
MESSAGE=$2  # Log entry.
LOGLEVEL=$3 # TRACE INFO WARN ERROR





################################################################################
# Constants
################################################################################

LOG_DIR="/var/log/salad"
LOG_FILE="${LOG_DIR}/${SOURCE}.log"





################################################################################
# Main execution
################################################################################

mkdir -p $LOG_DIR
timestamp=$(date "+%Y-%m-%d %H:%M:%S")
echo "[${timestamp} ${LOGLEVEL}] ${MESSAGE}" >> $LOG_FILE
